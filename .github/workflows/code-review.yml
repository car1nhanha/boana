# .github/workflows/code-review.yml
name: AI Code Review PT-BR
on:
  pull_request:
    types: [opened, synchronize, reopened]

permissions:
  contents: read
  pull-requests: write

jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - name: RevisÃ£o de CÃ³digo com IA
        uses: villesau/ai-codereviewer@v2.7.0
        env:
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
        with:
          # ConfiguraÃ§Ãµes principais
          model: "gpt-4"
          temperature: 0.1

          # ğŸ”½ PROMPT COMPLETO EM PORTUGUÃŠS ğŸ”½
          system-prompt: |
            VocÃª Ã© um revisor de cÃ³digo sÃªnior experiente. Analise as mudanÃ§as no pull request seguindo estas regras:

            1. **Idioma**: Comente sempre em PORTUGUÃŠS BRASILEIRO.
            2. **Tom**: Seja construtivo, educado e profissional.
            3. **Foco**: Identifique bugs, vulnerabilidades, mÃ¡s prÃ¡ticas e oportunidades de melhoria.
            4. **Formato**: Use markdown. Para problemas, use emojis:
               - ğŸ› para bugs
               - âš ï¸ para alertas/possÃ­veis problemas
               - ğŸ“ para sugestÃµes de melhoria
               - ğŸ”’ para questÃµes de seguranÃ§a
               - ğŸ¨ para questÃµes de estilo/legibilidade

            5. **Contexto**: Considere que Ã© um projeto em [React/Node/etc - ADAPTE].

            6. **Prioridade**: Comente apenas em problemas relevantes. NÃ£o seja excessivamente crÃ­tico com coisas triviais.

            7. **Estrutura do comentÃ¡rio**:
               - Primeiro: Resumo geral
               - Depois: Pontos especÃ­ficos com trechos de cÃ³digo
               - Sugira correÃ§Ãµes quando possÃ­vel

          # Outras configuraÃ§Ãµes
          review-simple-changes: false
          review-comment-tag: "ai-review"
          max-files-to-review: 30
          excluded-files: "*.md,*.txt,*.json,*.lock,*.yml,*.yaml"
